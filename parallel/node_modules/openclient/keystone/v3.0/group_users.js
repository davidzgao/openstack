var base        = require("../../client/base"),
    interpolate = require("../../client/utils").interpolate;

var GroupUsersManager = base.Manager.extend({
  namespace: "/groups/{group_id}/users",
  plural: "users",


  create: function (params, callback) {
    var baseUrl = this.client.url_for('identity');
    var route = "/groups/{group_id}/users/{user_id}";
    var url = baseUrl + interpolate(route, {group_id: params.data.group, user_id: params.data.user});
    params.url = url;
    delete params.data
    this.client.put(params, callback);
  },


  del: function (params, callback) {
    var baseUrl = this.client.url_for('identity');
    var route = "/groups/{group_id}/users/{user_id}";
    var url = baseUrl + interpolate(route, {group_id: params.data.group, user_id: params.data.user});
    params.url = url;
    delete params.data
    this.client.del(params, callback);
  },



  prepare_namespace: function(params) {
    return interpolate(this.namespace, { group_id: params.data.group });
  }
});

module.exports = GroupUsersManager;
