var async = require('async'),
    base = require("../../client/base"),
    urljoin = require("../../client/utils").urljoin;

var PriceManager = base.Manager.extend({
  namespace: "prices",

  all: function (params, callback) {
    params.manager_method = 'all';
    params = this.prepare_params(params, this.get_base_url(params), "plural");
    delete params.result_key;
    return this.client[params.http_method || this.method_map.get](params, callback);
  },

  get: function (params, callback) {
    params.manager_method = 'get';
    params = this.normalize_id(params);
    var url = urljoin(this.get_base_url(params), params.id);
    params = this.prepare_params(params, url, "singular");
    delete params.result_key;
    return this.client[params.http_method || this.method_map.get](params, callback);
  },

  create: function (params, callback) {
    params.url = this.get_base_url(params);
    this.client.post(params, callback);
  },

  update: function (params, callback) {
    params.url = urljoin(this.get_base_url(params), params.id);
    this.client.put(params, callback);
  }
});

module.exports = PriceManager;
