// Copyright (c) 2014. This file is confidential and proprietary.
// All Rights Reserved, Microchild Technologies (http://www.microchild.com)

var assert = require('assert');

var timeutils;
if (process.env.COVLIB) {
    timeutils = require('./covlib//lib/timeutils');
} else {
    timeutils = require('../lib/timeutils');
}

suite('Time Utils Testing', function() {
    suite('function toMilliseconds', function() {
        test('Date string should be converted', function() {
            assert.equal(0,
                timeutils.toMilliseconds('1970-01-01T00:00:00.000000'));
            assert.equal(0,
                timeutils.toMilliseconds('1970-01-01'));
        }); // end test

        test('Input a millionseconds should not be converted',
            function() {
            assert.equal(1406540654000,
                timeutils.toMilliseconds(1406540654000));
        }); // end test

        test('Input is not a number, just return it',
            function() {
            assert.equal('abc',
                timeutils.toMilliseconds('abc'));
        }); // end test
    }); // end function toMilliseconds

    suite('function isExpired', function() {
        test('Date should be expired', function() {
            assert.ok(
                timeutils.isExpired('2014-07-28T09:44:14.000000',
                    '2014-07-28T09:44:15.000000', false)
            );
            assert.ok(
                timeutils.isExpired('2014-07-28T09:44:14',
                    '2014-07-28T09:44:15', false)
            );
            assert.ok(
                timeutils.isExpired('2014-07-28T09:44:14.000000',
                    '2014-07-28T09:44:14.000000', true)
            );
        }); // end test

        test('Millionseconds should be expired', function() {
            assert.ok(
                timeutils.isExpired(1406540654000, 1406540654001, false)
            );
            assert.ok(
                timeutils.isExpired(1406540654000, 1406540654000, true)
            );
        }); // end test
    }); // end function isExpired
}); // end suite Time Utils Testing
