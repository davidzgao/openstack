var async = require('async'),
    base = require("../../client/base"),
    error = require("../../client/error");


var HypervisorManager = base.Manager.extend({
    namespace: "os-hypervisors",
    plural: "hypervisors",

  get_base_url: function (params) {
    var base_url = this._super(params);
    if (params.manager_method === "all" && params.detail) {
      base_url = this.urljoin(base_url, 'detail');  // Always fetch the details.
    }
    return base_url;
  },

  statistic: function (params, callback) {
    var url = this.urljoin(this.get_base_url(params), "statistics");
    params = this.prepare_params(params, url, "hypervisor_statistics");
    return this.client.get(params, callback);
  }
});


module.exports = HypervisorManager;
