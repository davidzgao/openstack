var base = require("../../client/base"),
    error = require("../../client/error"),
    urljoin = require("../../client/utils").urljoin;

var EventManager = base.Manager.extend({
  namespace: "custom_events",
  singular: "custom_event",

  get_base_url: function (params) {
    var base = this.client.url_for(params.endpoint_type || this.endpoint_type,
                                   undefined, params.region_name);
    if (!base) {
      base = this.client.url_for(params.endpoint_type_backup || this.endpoint_type_backup,
                                 undefined, params.region_name);
    }
    return urljoin(base, "v2", this.prepare_namespace(params));
  },
  getEvents: function (params, callback) {
    var base_url = this.get_base_url(params);
    params.url = base_url + '/';
    this.client.get(params, callback);
  }
});

module.exports = EventManager;
