
// Copyright (c) 2014. This file is confidential and proprietary.
// All Rights Reserved, Microchild Technologies (http://www.microchild.com)

'use strict';

/**
 *  Module: searchHash.js
 *
 * Collection of functions for handling search specific key's
 * value in hash.
 */
var jsonutils = require('./jsonutils');

/**
 * Search specific key's value in hash.
 *
 * Example:
 *     var hash = {
 *         id: '123',
 *         name: '123',
 *         metadata: {
 *             system_type: {
 *                 name: 'windows8'
 *             }
 *         }
 *     }
 *
 *     var keys = ["name", "system_type", "metadata"]
 *
 * @param {Object} data Object need convert to json string
 * @param {Object} fieldMap Optinal, Field transformer mapping
 *
 */
function getValueOfHashKey(hash, keys) {
    try{
        hash = jsonutils.parseJson(hash);
        if(keys.length == 1) {
            var keyInhash = keys[0];
            return hash[keyInhash];
        }
        var curKey = keys.pop();
        var valOfKey = hash[String(curKey)];
        if(valOfKey === undefined ) {
            return valOfKey;
        }else{
            return getValueOfHashKey(valOfKey,keys);
        }
    } catch(e) {
        return null;
    }
}
exports.getValueOfHashKey = getValueOfHashKey;
